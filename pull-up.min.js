function Carousel(e){function t(){i=e.width(),o.each(function(){$(this).width(i)}),n.width(i*u)}function a(e,t){n.removeClass("animate"),t&&n.addClass("animate"),n.css({transform:"translate3d("+e+"%,0,0)"})}function r(e){switch(e.gesture.preventDefault(),e.type){case"dragright":case"dragleft":var t=-(100/u)*c,r=100/i*e.gesture.deltaX/u;(0==c&&"right"==e.gesture.direction||c==u-1&&"left"==e.gesture.direction)&&(r*=.4),a(r+t);break;case"swipeleft":s.next(),e.gesture.stopDetect();break;case"swiperight":s.prev(),e.gesture.stopDetect();break;case"release":Math.abs(e.gesture.deltaX)>i/2?"right"==e.gesture.direction?s.prev():s.next():s.showPane(c,!0)}}var s=this;e=$(e);var n=$(">ul",e),o=$(">ul>li",e),i=0,u=o.length,c=0;this.init=function(){t(),$(window).on("load resize orientationchange",function(){t()})},this.showPane=function(e,t){e=Math.max(0,Math.min(e,u-1)),c=e;var r=-(100/u*c);a(r,t)},this.next=function(){return this.showPane(c+1,!0)},this.prev=function(){return this.showPane(c-1,!0)},new Hammer(e[0],{dragLockToAxis:!0}).on("release dragleft dragright swipeleft swiperight",r)}$(function(){function e(e){switch(e.gesture.preventDefault(),e.type){case"release":l.addClass("return").css({transform:"translate3d(0,0,0)"}),a?(c.addClass("pullup-mode"),l.css({transform:"translate3d(0,-"+i+"px,0)"}),s=!0):t(),setTimeout(function(){l.removeClass("return")},n);break;case"dragdown":r=e.gesture.deltaY*u,o>=r&&(a=!1),s&&(c.removeClass("pulldown-mode"),r=e.gesture.deltaY*u-i),r>=o&&(a=!1),l.css({transform:"translate3d(0,"+r+"px,0)"});break;case"dragup":r=e.gesture.deltaY*u,o>=r&&(a=!0),s&&(c.removeClass("pullup-mode"),0===d&&(d=i),r=e.gesture.deltaY*u-d,o>=r&&(a=!0)),l.css({transform:"translate3d(0,"+r+"px,0)"})}}function t(){l.attr("class","return").css({transform:"translate3d(0,0,0)"}),c.attr("class",""),a=!1,s=!1,d=0,setTimeout(function(){l.removeClass("return")},n)}var a,r,s,n=200,o=70,i=150,u=.4,c=$("body"),l=$("#hitzone"),d=0;l.hammer().on("touch dragdown dragup release",function(t){e(t)}),$(".cancel").hammer().on("tap",function(){t()});var h=new Carousel("#carousel");h.init()});