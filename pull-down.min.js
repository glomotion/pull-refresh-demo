function Carousel(e){function t(){i=e.width(),o.each(function(){$(this).width(i)}),n.width(i*u)}function a(e,t){n.removeClass("animate"),t&&n.addClass("animate"),n.css({transform:"translate3d("+e+"%,0,0)"})}function r(e){switch(e.gesture.preventDefault(),e.type){case"dragright":case"dragleft":var t=-(100/u)*l,r=100/i*e.gesture.deltaX/u;(0==l&&"right"==e.gesture.direction||l==u-1&&"left"==e.gesture.direction)&&(r*=.4),a(r+t);break;case"swipeleft":s.next(),e.gesture.stopDetect();break;case"swiperight":s.prev(),e.gesture.stopDetect();break;case"release":Math.abs(e.gesture.deltaX)>i/2?"right"==e.gesture.direction?s.prev():s.next():s.showPane(l,!0)}}var s=this;e=$(e);var n=$(">ul",e),o=$(">ul>li",e),i=0,u=o.length,l=0;this.init=function(){t(),$(window).on("load resize orientationchange",function(){t()})},this.showPane=function(e,t){e=Math.max(0,Math.min(e,u-1)),l=e;var r=-(100/u*l);a(r,t)},this.next=function(){return this.showPane(l+1,!0)},this.prev=function(){return this.showPane(l-1,!0)},new Hammer(e[0],{dragLockToAxis:!0}).on("release dragleft dragright swipeleft swiperight",r)}$(function(){function e(e){switch(e.gesture.preventDefault(),e.type){case"release":l.addClass("return"),c.css({transform:"translate3d(0,0,0)"}),a?(d.attr("data-percent","100"),l.addClass("pulldown-mode"),c.css({transform:"translate3d(0,"+i+"px,0)"}),s=!0):t(),setTimeout(function(){l.removeClass("return")},n);break;case"dragdown":if(r=e.gesture.deltaY*u,r>=o&&(a=!0),s)l.removeClass("pulldown-mode"),0===h&&(h=i),r=e.gesture.deltaY*u+h,r>=o&&(a=!0);else{var f=100/o*r;101>=f&&f>0&&d.attr("data-percent",10*Math.round(f/10))}c.css({transform:"translate3d(0,"+r+"px,0)"});break;case"dragup":if(r=e.gesture.deltaY*u,o>=r&&(a=!1),s)l.removeClass("pulldown-mode"),r=e.gesture.deltaY*u+i;else{var f=101/o*r;100>=f&&f>0&&d.attr("data-percent",10*Math.round(f/10))}o>=r&&(a=!1),c.css({transform:"translate3d(0,"+r+"px,0)"})}}function t(){c.css({transform:"translate3d(0,0,0)"}),l.attr("class","return"),a=!1,s=!1,h=0,d.attr("data-percent","0"),setTimeout(function(){l.removeClass("return")},n)}var a,r,s,n=200,o=70,i=150,u=.4,l=$("body"),c=$("#hitzone"),d=$("#pull-down"),h=0;c.hammer().on("touch dragdown dragup release",function(t){e(t)}),$(".cancel").hammer().on("tap",function(){t()});var f=new Carousel("#carousel");f.init()});