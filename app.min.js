function Carousel(e){function t(){o=e.width(),i.each(function(){$(this).width(o)}),n.width(o*u)}function a(e,t){n.removeClass("animate"),t&&n.addClass("animate"),n.css({transform:"translate3d("+e+"%,0,0)"})}function s(e){switch(e.gesture.preventDefault(),e.type){case"dragright":case"dragleft":var t=-(100/u)*c,s=100/o*e.gesture.deltaX/u;(0==c&&"right"==e.gesture.direction||c==u-1&&"left"==e.gesture.direction)&&(s*=.4),a(s+t);break;case"swipeleft":r.next(),e.gesture.stopDetect();break;case"swiperight":r.prev(),e.gesture.stopDetect();break;case"release":Math.abs(e.gesture.deltaX)>o/2?"right"==e.gesture.direction?r.prev():r.next():r.showPane(c,!0)}}var r=this;e=$(e);var n=$(">ul",e),i=$(">ul>li",e),o=0,u=i.length,c=0;this.init=function(){t(),$(window).on("load resize orientationchange",function(){t()})},this.showPane=function(e,t){e=Math.max(0,Math.min(e,u-1)),c=e;var s=-(100/u*c);a(s,t)},this.next=function(){return this.showPane(c+1,!0)},this.prev=function(){return this.showPane(c-1,!0)},new Hammer(e[0],{dragLockToAxis:!0}).on("release dragleft dragright swipeleft swiperight",s)}$(function(){function e(e){switch(e.gesture.preventDefault(),e.type){case"release":l.addClass("return").css({transform:"translate3d(0,0,0)"}),a&&(c.addClass("pulldown-mode"),r=!0),s&&(c.addClass("pullup-mode"),r=!0),setTimeout(function(){l.removeClass("return")},i);break;case"dragdown":n=e.gesture.deltaY*u,console.log(n),s&&r&&t(),l.css({transform:"translate3d(0,"+n+"px,0)"}),!r&&n>=o&&(a=!0,n=0);break;case"dragup":n=e.gesture.deltaY*u,console.log(n),a&&r&&t(),l.css({transform:"translate3d(0,"+n+"px,0)"}),!r&&-o>=n&&(s=!0)}}function t(){l.attr("class","return"),c.attr("class",""),a=!1,s=!1,setTimeout(function(){r=!1,l.removeClass("return")},2*i)}var a,s,r,n,i=200,o=70,u=.4,c=$("body"),l=$("#hitzone");l.hammer().on("touch dragdown dragup release",function(t){e(t)}),$(".cancel").hammer().on("tap",function(){t()});var d=new Carousel("#carousel");d.init()});